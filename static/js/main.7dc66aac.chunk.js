(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,a,t){e.exports={home:"home_home__zRGmq",title:"home_title__Mrm6W",loading:"home_loading__27nhd",card:"home_card__2XMws",cardContent:"home_cardContent__1Rr5_",movieTitle:"home_movieTitle__OFJmU",movieMeta:"home_movieMeta__3k7Nm",rating:"home_rating__20Uaj",movieOverview:"home_movieOverview__13YgQ",cardActions:"home_cardActions__RrzC5",price:"home_price__3St5w",media:"home_media__1wVcI",pagination:"home_pagination__q5MNO",currentPageText:"home_currentPageText__2XbMb",pageNumber:"home_pageNumber__1RNET"}},148:function(e,a,t){e.exports=t(389)},153:function(e,a,t){},28:function(e,a,t){e.exports={rootApp:"app_rootApp__3iDhW",navbar:"app_navbar__3VJ_g",navbarTitle:"app_navbarTitle__3npjq",balance:"app_balance__12kqd",balanceAmount:"app_balanceAmount__18NFD",rootPages:"app_rootPages__3Uj55"}},3:function(e,a,t){e.exports={detail:"detail_detail__h3D94",loading:"detail_loading__2Ueww",backdropImage:"detail_backdropImage__7DPcd",mainArea:"detail_mainArea__39-3e",card:"detail_card__wmBXr",media:"detail_media__mg7SW",cardDetail:"detail_cardDetail__15KJX",cardContent:"detail_cardContent__1cgVq",movieTitle:"detail_movieTitle__1AkUc",movieTagline:"detail_movieTagline__1c3FZ",movieRating:"detail_movieRating__v0tTU",ratingValue:"detail_ratingValue__1o4I9",movieGenre:"detail_movieGenre__1GLmy",movieLanguage:"detail_movieLanguage__3zz86",movieRelease:"detail_movieRelease__3LrB9",movieOverview:"detail_movieOverview__1wbNo",cardActions:"detail_cardActions__27uI_",price:"detail_price__2-ZGt",movieRecommendation:"detail_movieRecommendation__3PcpI",noRecommendation:"detail_noRecommendation__2FagM",recommendationTitle:"detail_recommendationTitle__2eecE",recommendationContainer:"detail_recommendationContainer__6AZRb",movieSimilar:"detail_movieSimilar__1Gie1",noSimilar:"detail_noSimilar__1TdDZ",similarTitle:"detail_similarTitle__2Y3ZR",similarContainer:"detail_similarContainer__1hbs7"}},389:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(26),o=t.n(i),c=t(390),s=(t(153),t(32)),l=t(33),m=t(36),u=t(34),p=t(37),d=t(391),v=t(392),g=t(144),h=t.n(g),_=t(145),f=t.n(_),b=t(143),x=t.n(b),w=t(35),E=t.n(w),k=t(28),N=t.n(k),y=t(49),S=t(5),O=t.n(S),A=t(68),j=t(12),M=t(24),P=t.n(M),T=t(38),C=t.n(T),R=t(48),D=t.n(R),L=t(65),B=t.n(L),I=t(40),G=t.n(I),U=t(39),F=t.n(U),V=t(27),W=t.n(V),Y=t(66),q=t.n(Y),z=t(138),J=t.n(z),Z=t(63),X=t.n(Z),H=t(64),K=t.n(H),Q=t(13),$=t.n(Q),ee="https://image.tmdb.org/t/p/original",ae=t(139),te=t.n(ae).a.create({baseURL:"https://api.themoviedb.org/3/",params:{api_key:"81eb02a0cbd582697702eff26e790972",language:"en-US"}}),ne=r.a.createContext({}),re=ne.Provider,ie=ne.Consumer,oe=function(e){return function(a){return r.a.createElement(ie,null,function(t){return r.a.createElement(e,Object.assign({},a,t))})}},ce=oe(function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object(m.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={movies:[],genres:[],showLoading:!0,currentPage:1,totalPages:1},t.contextApiState=t.props.state,t.contextApiActions=t.props.actions,t.getMovies=Object(j.a)(O.a.mark(function e(){var a,n,r,i,o,c,s,l,m;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.setState({movies:[],showLoading:!0});case 3:if(!(a=J.a.parse(t.props.location.search).page)){e.next=9;break}return e.next=7,t.setState({currentPage:a});case 7:e.next=11;break;case 9:return e.next=11,t.setState({currentPage:1});case 11:return e.next=13,te.get("/movie/now_playing",{params:{page:t.state.currentPage,sort_by:"release_date.desc",region:"ID"}});case 13:for(n=e.sent,r=[],i=!0,o=!1,c=void 0,e.prev=18,s=function(){var e=m.value,a=Object(A.a)({},e,{owned:!1}),n=[],i=!0,o=!1,c=void 0;try{for(var s,l=function(){var e=s.value,a=t.state.genres.find(function(a){return a.id===e});n.push(a.name)},u=e.genre_ids[Symbol.iterator]();!(i=(s=u.next()).done);i=!0)l()}catch(v){o=!0,c=v}finally{try{i||null==u.return||u.return()}finally{if(o)throw c}}a.genres=n.join(", ");var p=0,d=e.vote_average;d<=3?p=3500:d<=6?p=8250:d<=8?p=16350:d<=10&&(p=21250),a.price=p,a.owned=void 0!==K()(t.contextApiState.moviesOwned,function(a){return a===e.id}),r.push(a)},l=n.data.results[Symbol.iterator]();!(i=(m=l.next()).done);i=!0)s();e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),o=!0,c=e.t0;case 27:e.prev=27,e.prev=28,i||null==l.return||l.return();case 30:if(e.prev=30,!o){e.next=33;break}throw c;case 33:return e.finish(30);case 34:return e.finish(27);case 35:return e.next=37,t.setState({movies:r,totalPages:n.data.total_pages});case 37:e.next=42;break;case 39:e.prev=39,e.t1=e.catch(0),console.log(e.t1);case 42:return e.prev=42,e.next=45,t.setState({showLoading:!1});case 45:return e.finish(42);case 46:case"end":return e.stop()}},e,this,[[0,39,42,46],[18,23,27,35],[28,,30,34]])})),t.getGenres=Object(j.a)(O.a.mark(function e(){var a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.setState({genres:[],showLoading:!0});case 3:return e.next=5,te.get("/genre/movie/list");case 5:return a=e.sent,e.next=8,t.setState({genres:a.data.genres});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:return e.prev=13,e.next=16,t.setState({showLoading:!1});case 16:return e.finish(13);case 17:case"end":return e.stop()}},e,this,[[0,10,13,17]])})),t.onNextPage=Object(j.a)(O.a.mark(function e(){var a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Number(t.state.currentPage),t.props.history.push("?page=".concat(a+=1)),e.next=4,t.getMovies();case 4:case"end":return e.stop()}},e,this)})),t.onPrevPage=Object(j.a)(O.a.mark(function e(){var a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Number(t.state.currentPage),1===(a-=1)?t.props.history.push("/"):t.props.history.push("?page=".concat(a)),e.next=4,t.getMovies();case 4:case"end":return e.stop()}},e,this)})),t.onBuy=function(){var e=Object(j.a)(O.a.mark(function e(a){var n,r,i,o;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.contextApiState.balance<=0&&t.contextApiActions.updateSnackbar({open:!0,message:"Insufficient Balance",duration:1500}),a.owned){e.next=19;break}if(!((n=t.contextApiState.balance)-a.price<=0)){e.next=6;break}return t.contextApiActions.updateSnackbar({open:!0,message:"Insufficient Balance",duration:1500}),e.abrupt("return");case 6:return e.next=8,t.contextApiActions.updateBalance(n-a.price);case 8:return t.contextApiState=t.props.state,(r=Object(y.a)(t.contextApiState.moviesOwned)).push(a.id),e.next=13,t.contextApiActions.updateMoviesOwned(r);case 13:return t.contextApiState=t.props.state,i=Object(y.a)(t.state.movies),o=i.findIndex(function(e){return e.id===a.id}),i[o].owned=!0,e.next=19,t.setState({movies:i});case 19:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),t.goToDetailPage=function(){var e=Object(j.a)(O.a.mark(function e(a){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.props.history.push("/".concat(a.id,"-").concat(X()(a.title)));case 1:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),t}return Object(p.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(j.a)(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getGenres();case 2:return e.next=4,this.getMovies();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=[];if(this.state.movies!==[]){var t=!0,n=!1,i=void 0;try{for(var o,c=function(){var t=o.value;a.push(r.a.createElement(P.a,{item:!0,xs:3,key:t.id},r.a.createElement(C.a,{className:$.a.card},r.a.createElement(D.a,{onClick:function(){return e.goToDetailPage(t)}},r.a.createElement(F.a,{className:$.a.media,image:ee+t.poster_path,title:t.title}),r.a.createElement(G.a,{className:$.a.cardContent},r.a.createElement("div",{className:$.a.movieMeta},r.a.createElement("span",null,r.a.createElement("span",{className:$.a.rating},t.vote_average)," ","/ 10")," "," - ",r.a.createElement("span",null,t.genres)),r.a.createElement("p",{className:$.a.movieTitle},t.title),r.a.createElement("p",{className:$.a.movieOverview},t.overview))),r.a.createElement(B.a,{className:$.a.cardActions},r.a.createElement("p",{className:$.a.price},E.a.formatMoney(t.price,"Rp ",0,".")),r.a.createElement(W.a,{color:"primary",disabled:t.owned,variant:"outlined",onClick:function(){return e.onBuy(t)}},t.owned?"Owned":"Buy")))))},s=this.state.movies[Symbol.iterator]();!(t=(o=s.next()).done);t=!0)c()}catch(l){n=!0,i=l}finally{try{t||null==s.return||s.return()}finally{if(n)throw i}}}return r.a.createElement("div",{className:$.a.home},r.a.createElement("p",{className:$.a.title},"Now Playing"),this.state.showLoading&&r.a.createElement("div",{className:$.a.loading},r.a.createElement(q.a,{color:"primary"})),r.a.createElement(P.a,{container:!0,spacing:24},a),r.a.createElement("div",{className:$.a.pagination},r.a.createElement(W.a,{variant:"outlined",color:"primary",onClick:this.onPrevPage,disabled:this.state.currentPage<=1},"Prev"),r.a.createElement("p",{className:$.a.currentPageText},"Page",r.a.createElement("span",{className:$.a.pageNumber},this.state.currentPage)),r.a.createElement(W.a,{variant:"outlined",color:"secondary",onClick:this.onNextPage,disabled:this.state.currentPage>=this.state.totalPages},"Next")))}}]),a}(n.Component)),se=t(141),le=t.n(se),me=t(69),ue=t.n(me),pe=t(91),de=t.n(pe),ve=t(142),ge=t.n(ve),he=t(3),_e=t.n(he),fe=oe(function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object(m.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={id:null,slug:null,showLoading:!1,movie:{},recommendations:[],similar:[]},t.contextApiState=t.props.state,t.contextApiActions=t.props.actions,t.setInitialState=Object(j.a)(O.a.mark(function e(){var a,n,r;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.location.pathname.substring(1).split("-"),n=a[0],r=le()(a,a.length-1).join("-"),e.next=5,t.setState({id:n,slug:r});case 5:case"end":return e.stop()}},e,this)})),t.getMovieDetail=Object(j.a)(O.a.mark(function e(){var a,n,r,i;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.setState({movie:{},showLoading:!0});case 3:return e.next=5,te.get("/movie/".concat(t.state.id));case 5:return a=e.sent,(n=a.data).genreText=de()(n.genres,"name").join(", "),n.language=de()(n.spoken_languages,"name").join(", "),r=0,(i=n.vote_average)<=3?r=3500:i<=6?r=8250:i<=8?r=16350:i<=10&&(r=21250),n.price=r,n.owned=void 0!==K()(t.contextApiState.moviesOwned,function(e){return e===n.id}),e.next=16,t.setState({movie:n});case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0);case 21:return e.prev=21,e.next=24,t.setState({showLoading:!1});case 24:return e.finish(21);case 25:case"end":return e.stop()}},e,this,[[0,18,21,25]])})),t.getMovieRecommendation=Object(j.a)(O.a.mark(function e(){var a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.setState({recommendations:[],showLoading:!0});case 3:return e.next=5,te.get("/movie/".concat(t.state.id,"/recommendations"));case 5:return a=e.sent,e.next=8,t.setState({recommendations:a.data.results});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:return e.prev=13,e.next=16,t.setState({showLoading:!1});case 16:return e.finish(13);case 17:case"end":return e.stop()}},e,this,[[0,10,13,17]])})),t.getMovieSimilar=Object(j.a)(O.a.mark(function e(){var a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.setState({similar:[],showLoading:!0});case 3:return e.next=5,te.get("/movie/".concat(t.state.id,"/similar"));case 5:return a=e.sent,e.next=8,t.setState({similar:a.data.results});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:return e.prev=13,e.next=16,t.setState({showLoading:!1});case 16:return e.finish(13);case 17:case"end":return e.stop()}},e,this,[[0,10,13,17]])})),t.showMovieDetail=function(){var e=Object(j.a)(O.a.mark(function e(a){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.history.push("/".concat(a.id,"-").concat(X()(a.title)));case 2:return e.next=4,t.setInitialState();case 4:return e.next=6,t.getMovieDetail();case 6:return e.next=8,t.getMovieRecommendation();case 8:return e.next=10,t.getMovieSimilar();case 10:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),t.onBuy=Object(j.a)(O.a.mark(function e(){var a,n,r;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.contextApiState.balance<=0&&t.contextApiActions.updateSnackbar({open:!0,message:"Insufficient Balance",duration:1500}),t.state.movie.owned){e.next=18;break}if(!((a=t.contextApiState.balance)-t.state.movie.price<=0)){e.next=6;break}return t.contextApiActions.updateSnackbar({open:!0,message:"Insufficient Balance",duration:1500}),e.abrupt("return");case 6:return e.next=8,t.contextApiActions.updateBalance(a-t.state.movie.price);case 8:return t.contextApiState=t.props.state,(n=Object(y.a)(t.contextApiState.moviesOwned)).push(t.state.movie.id),e.next=13,t.contextApiActions.updateMoviesOwned(n);case 13:return t.contextApiState=t.props.state,(r=Object(A.a)({},t.state.movie)).owned=!0,e.next=18,t.setState({movie:r});case 18:case"end":return e.stop()}},e,this)})),t}return Object(p.a)(a,e),Object(l.a)(a,[{key:"componentWillMount",value:function(){var e=Object(j.a)(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setInitialState();case 2:return e.next=4,this.getMovieDetail();case 4:return e.next=6,this.getMovieRecommendation();case 6:return e.next=8,this.getMovieSimilar();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.state,t=a.movie,n=a.recommendations,i=a.similar,o=r.a.createElement(r.a.Fragment,null),c=[],s=[];if(!ue()(t)){if(ue()(n))c=r.a.createElement("p",{className:_e.a.noRecommendation},"Sorry, no recommendation for this movie");else{var l=!0,m=!1,u=void 0;try{for(var p,d=function(){var a=p.value;c.push(r.a.createElement(P.a,{item:!0,xs:3,key:a.id},r.a.createElement(C.a,{className:_e.a.card},r.a.createElement(D.a,{onClick:function(){return e.showMovieDetail(a)}},r.a.createElement(F.a,{className:_e.a.media,image:ee+a.poster_path,title:a.title}),r.a.createElement(G.a,{className:_e.a.cardContent},r.a.createElement("p",{className:_e.a.movieTitle},a.title),r.a.createElement("p",{className:_e.a.movieOverview},a.overview))))))},v=n[Symbol.iterator]();!(l=(p=v.next()).done);l=!0)d()}catch(w){m=!0,u=w}finally{try{l||null==v.return||v.return()}finally{if(m)throw u}}}if(ue()(i))s=r.a.createElement("p",{className:_e.a.noSimilar},"Sorry, no similar items for this movie");else{var g=!0,h=!1,_=void 0;try{for(var f,b=function(){var a=f.value;s.push(r.a.createElement(P.a,{item:!0,xs:3,key:a.id},r.a.createElement(C.a,{className:_e.a.card},r.a.createElement(D.a,{onClick:function(){return e.showMovieDetail(a)}},r.a.createElement(F.a,{className:_e.a.media,image:ee+a.poster_path,title:a.title}),r.a.createElement(G.a,{className:_e.a.cardContent},r.a.createElement("p",{className:_e.a.movieTitle},a.title),r.a.createElement("p",{className:_e.a.movieOverview},a.overview))))))},x=i[Symbol.iterator]();!(g=(f=x.next()).done);g=!0)b()}catch(w){h=!0,_=w}finally{try{g||null==x.return||x.return()}finally{if(h)throw _}}}o=r.a.createElement(r.a.Fragment,null,this.state.showLoading&&r.a.createElement("div",{className:_e.a.loading},r.a.createElement(q.a,{color:"primary"})),r.a.createElement("img",{src:ee+t.backdrop_path,alt:"backdrop",className:_e.a.backdropImage}),r.a.createElement("div",{className:_e.a.mainArea},r.a.createElement(C.a,{className:_e.a.card},r.a.createElement(F.a,{className:_e.a.media,image:ee+t.poster_path,title:t.title}),r.a.createElement("div",{className:_e.a.cardDetail},r.a.createElement(G.a,{className:_e.a.cardContent},r.a.createElement("p",{className:_e.a.movieTitle},t.title),r.a.createElement("p",{className:_e.a.movieTagline},t.tagline),r.a.createElement("p",{className:_e.a.movieRating},r.a.createElement("b",null,"Rating: "),r.a.createElement("span",{className:_e.a.ratingValue},t.vote_average)," ","/ 10"),r.a.createElement("p",{className:_e.a.movieGenre},r.a.createElement("b",null,"Genre: "),t.genreText),r.a.createElement("p",{className:_e.a.movieLanguage},r.a.createElement("b",null,"Language: "),t.language),r.a.createElement("p",{className:_e.a.movieRelease},r.a.createElement("b",null,"Release Date: "),ge()(t.release_date,"DD MMMM YYYY")),r.a.createElement("p",{className:_e.a.movieOverview},'"',t.overview,'"')),r.a.createElement(B.a,{className:_e.a.cardActions},r.a.createElement("p",{className:_e.a.price},E.a.formatMoney(t.price,"Rp ",0,".")),r.a.createElement(W.a,{color:"secondary",disabled:t.owned,variant:"outlined",onClick:this.onBuy},t.owned?"Owned":"Buy"))))),r.a.createElement("div",{className:_e.a.movieRecommendation},r.a.createElement("p",{className:_e.a.recommendationTitle},"Recommendations"),r.a.createElement(P.a,{container:!0,spacing:24,className:_e.a.recommendationContainer},c)),r.a.createElement("div",{className:_e.a.movieSimilar},r.a.createElement("p",{className:_e.a.similarTitle},"Similar"),r.a.createElement(P.a,{container:!0,spacing:24,className:_e.a.similarContainer},s)))}return r.a.createElement("div",{className:_e.a.detail},o)}}]),a}(n.Component)),be=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object(m.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={balance:1e5,snackbar:{open:!1,message:"",duration:1500},moviesOwned:[]},t.updateBalance=function(e){t.setState({balance:e})},t.updateSnackbar=function(e){var a=e.open,n=e.message,r=e.duration;t.setState({snackbar:{open:a,message:n,duration:r}})},t.updateMoviesOwned=function(e){t.setState({moviesOwned:e})},t}return Object(p.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(re,{value:{state:this.state,actions:{updateBalance:this.updateBalance,updateSnackbar:this.updateSnackbar,updateMoviesOwned:this.updateMoviesOwned}}},r.a.createElement("div",{className:N.a.rootApp},r.a.createElement(x.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.snackbar.open,autoHideDuration:this.state.snackbar.duration,onClose:function(){return e.setState({snackbar:{open:!1,message:"",duration:1500}})},message:this.state.snackbar.message}),r.a.createElement(h.a,{className:N.a.navbar,position:"fixed",color:"default"},r.a.createElement(f.a,null,r.a.createElement("p",{className:N.a.navbarTitle},"Tokoflix"),r.a.createElement("p",{className:N.a.balance},"Rp"," ",r.a.createElement("span",{className:N.a.balanceAmount},E.a.formatMoney(this.state.balance,"",0,"."))))),r.a.createElement("div",{className:N.a.rootPages},r.a.createElement(d.a,null,r.a.createElement(v.a,{path:"/",exact:!0,component:ce}),r.a.createElement(v.a,{path:"/:id_and_slug",component:fe})))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var xe=r.a.createElement(c.a,{basename:"/tokoflix"},r.a.createElement(be,null));o.a.render(xe,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[148,1,2]]]);
//# sourceMappingURL=main.7dc66aac.chunk.js.map